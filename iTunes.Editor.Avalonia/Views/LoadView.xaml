<UserControl x:Class="ITunes.Editor.Views.LoadView"
             xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:converters="clr-namespace:ITunes.Editor.Converters;assembly=iTunes.Editor.Avalonia"
             xmlns:core="clr-namespace:ITunes.Editor;assembly=iTunes.Editor.Core">
    <ItemsControl Items="{Binding Providers}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate DataType="{x:Type core:ISongsProvider}">
                <Button Width="100"
                        Height="100"
                        Margin="10"
                        CommandParameter="{Binding}">
                    <Button.Command>
                        <Binding Path="DataContext.LoadAsync" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type UserControl}}">
                            <Binding.Converter>
                                <converters:CommandConverter />
                            </Binding.Converter>
                        </Binding>
                    </Button.Command>
                    <Button.Content>
                        <StackPanel>
                            <TextBlock Text="Load songs from " />
                            <TextBlock Text="{Binding Name, Mode=OneWay}" />
                        </StackPanel>
                    </Button.Content>
                </Button>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</UserControl>